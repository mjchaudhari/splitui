<div ng-controller="groupDetailCtrl" class="col-sm-12" ng-switch="view">
    <div class="container" ng-if="isLoading">
        <md-progress-linear md-mode="query"></md-progress-linear>    
        <div class="" layout="row" layout-align="center">
            <img style="height:100px;width:100px" class="rotating" src="./content/images/cp.png" />
        </div>
    </div>    
    
    <div ng-switch-when="list">
        
        <div ng-if="!isLoading" layout="column" style="min-height:600px" class="toolbarScrollShrink">
            <md-button class="md-fab md-fab-bottom-right" aria-label="Add" ng-click="createAsset()">
                <ng-md-icon icon="add"></ng-md-icon>
            </md-button>
            <md-toolbar md-scroll-shrink="false">
                <div class="md-toolbar-tools">
                    <md-button class="md-icon-button" ui-sref="index.groups"  aria-label="groups">
                      <ng-md-icon icon="arrow_back"></ng-md-icon> 
                    </md-button>
                    <span flex>{{group.Name}}</span>
                    <div ng-show="isLoading" class="" layout="row" layout-align="end">
                        <img style="height:50px;width:50px" class="rotating" src="./content/images/cp.png" />
                    </div>
                    <span><img ng-src="{{group.Thumbnail}}"  class="avatar-small" alt="{{group.Name}}"></span>
                </div>
            </md-toolbar>
            <md-content flex layout-padding class="content-height">
                <md-card md-scroll-shrink="true">
                    <div class="" layout="row" >
                        <img ng-src="{{group.Thumbnail}}" class="avatar" alt="{{group.Name}}">
                        <div class="inset md-list-item-text">
                          <b>{{group.Name}}</b>
                          <p>{{group.Description}}</p>
                        </div>
                    </div>

                    <md-card-actions layout="row" layout-align="end center">
                        <ng-md-icon icon="message"></ng-md-icon><div class="inset">{{group.unreadMessages.length||'--'}}</div>
                        <ng-md-icon icon="people"></ng-md-icon><div class="inset">{{group.Members.length}}</div>
                    </md-card-actions>
                </md-card>
                <!-- Tabls for messages | topics |  -->
                <div >
                    <md-tabs md-dynamic-height md-border-bottom>
                        <md-tab label="Assets">
                            <md-content class="md-padding">
                                <md-list>
                                    <md-list-item class="md-3-line" ng-repeat="item in assets">
                                        <div  layout="row">
                                            <img ng-src="{{item.Thumbnail}}" class="md-avatar" />
                                            <div class="md-list-item-text" layout="column">
                                                <h3>{{ item.Name }}</h3>
                                                <p>{{ item.Description }}</p>
                                                <p>
                                                    <span class="md-caption">{{ item.AuditTrail[0].UpdatedBy.FirstName}} {{item.AuditTrail[0].UpdatedBy.LastName}}</span> 
                                                    <span class="md-caption"> on {{item.AuditTrail[0].UpdatedOn | date:'MM/dd/yyyy'}}</span>
                                                </p>
                                                <div layout="row">
                                                    <div flex></div>
                                                    <md-button class="md-icon-button" ui-sref="index.groups" aria-label="goups">
                                                      <ng-md-icon icon="thumb_up"></ng-md-icon> 
                                                    </md-button>
                                                </div>
                                            </div>

                                            </div>

                                        <md-divider></md-divider>
                                    </md-list-item>
                                </md-list>
                            <md-content>
                        </md-tab>
                        <md-tab label="Topics">
                            <md-content class="md-padding">
                            <md-content>
                        </md-tab>
                    </md-tabs>
                </div>
            <md-content >
        </div>
    </div>
    <!--Add edit-->
    <div ng-switch-when="item">
        <md-toolbar md-scroll-shrink="false">
            <div class="md-toolbar-tools">
                <md-button class="md-icon-button" ng-click="backToList()"  aria-label="goups">
                  <ng-md-icon icon="cancel"></ng-md-icon> 
                </md-button>
                <span flex>{{group.Name}}</span>
                <div ng-show="isSaving" class="" layout="row" layout-align="end">
                    <img style="height:50px;width:50px" class="rotating" src="./content/images/cp.png" />
                </div>
                <span><img ng-src="{{group.Thumbnail}}"  class="avatar-small" alt="{{group.Name}}"></span>
            </div>
        </md-toolbar>
        
        <md-content flex layout-padding class="content-height">

            <md-menu>
              <md-button class="md-button" ng-click="openCategoryMenu($mdOpenMenu, $event)"  aria-label="category">
                  <ng-md-icon icon="{{selectedCategory.icon}}"></ng-md-icon>{{selectedCategory.Name}}
              </md-button>
              <md-menu-content >
                <md-menu-item ng-repeat="m in categories">
                  <md-button class="md-button" ng-click="setCategory(m,$event)"  aria-label="{{m.Name}}">
                    <ng-md-icon icon="{{m.icon}}"></ng-md-icon> {{m.Name}}
                  </md-button>
                </md-menu-item>
              </md-menu-content>
            </md-menu>
            <div layout="row">
                <div layout="row">
<!--                     <ez-image-upload img="asset.Thumbnail"><ez-image-upload> -->
                    <img src="https://placehold.it/50x50" class="circle" />
                </div>
                <div layout="row">
                    <md-input-container class="md-block" >
                        <label>Asset title (optional)</label>
                    <input ng-model="asset.Name">
                </div>
            </md-input-container >    
            </div>
            
            <md-input-container class="md-block">
              <label>Message</label>
              <textarea ng-model="asset.Description" columns="1" md-maxlength="1000" rows="5"></textarea>
            </md-input-container>

            
            <md-button class="md-button md-button-raised  md-button-primary" ng-click="saveAsset()"  aria-label="{save">
                <ng-md-icon icon="save"></ng-md-icon> Save
            </md-button>
        </md-content>
    </div>
</div>